(function(f,c,g){var b={trigger:"konami",sequence:"UP UP DOWN DOWN LEFT RIGHT LEFT RIGHT B A START".split(" "),limit:!1,debug:!1,vars:{pos:0,touchstart:[0,0],touchend:[0,0],buttons:{13:"START",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",66:"B",65:"A"}},keyup:function(a){b.key_evaluate(b.vars.buttons[a.keyCode]);return!0},key_evaluate:function(a){var d=this.trigger,e=this.vars.pos,b=this.sequence;this.debugging(a);e=b[e]===a?e+1:0;e===b.length&&0!==this.limit&&(e=0,!1!==this.limit&&(this.limit-=1),dispatchEvent?
(d=new CustomEvent(d),c.dispatchEvent(d)):c.documentElement[d]+=1);this.vars.pos=e;return!0},touchstart:function(a){b.vars.touchstart=[a.changedTouches[0].clientX,a.changedTouches[0].clientY];return!0},touchend:function(a){b.vars.touchend=[a.changedTouches[0].clientX,a.changedTouches[0].clientY];b.touch_evaluate();return!0},touch_evaluate:function(){var a="",d=this.vars.pos,b=this.sequence,a=this.vars.touchstart,c=this.vars.touchend,a=Math.abs(a[0]-c[0])<Math.abs(a[1]-c[1])?a[1]>c[1]?"UP":"DOWN":
a[0]>c[0]?"LEFT":"RIGHT";-1===["UP","DOWN","LEFT","RIGHT"].indexOf(b[d])&&(a=b[d]);this.key_evaluate(a);return!0},init:function(){this.events();return!0},listen:function(a){c.addEventListener?c.addEventListener(b.trigger,a):c.documentElement.attachEvent("onpropertychange",function(c){c.propertyName===b.trigger&&a.call()});return!0},listener:function(a,b){c.addEventListener?c.addEventListener(a,b):c.attachEvent("on"+a,b);return!0},events:function(){this.listener("keyup",this.keyup);this.listener("touchstart",
this.touchstart);this.listener("touchend",this.touchend);return!0},debugging:function(a){if(!1===this.debug)return!1;console?console.log(a):alert(a);return!0}};f.Konami=b})(window,document);
