(function(g,e,h){var d={trigger:"konami",sequence:"UP UP DOWN DOWN LEFT RIGHT LEFT RIGHT B A START".split(" "),limit:!1,variance:20,debug:!1,vars:{pos:0,coords:[0,0],touch:{}},key:function(a){var b="";switch(a.keyCode){case 13:b="START";break;case 37:b="LEFT";break;case 38:b="UP";break;case 39:b="RIGHT";break;case 40:b="DOWN";break;case 66:b="B";break;case 65:b="A";break;default:b=""}d.key_evaluate(b);return!0},key_evaluate:function(a){var b="function"===typeof CustomEvent?new CustomEvent(this.trigger):
this.trigger,f=this.vars.pos,d=this.sequence;this.debugging(a);d[f]===a?f+=1:(f=0,this.vars.coords=[0,0],this.vars.touch={});f===d.length&&0!==this.limit&&(f=0,!1!==this.limit&&(this.limit-=1),"function"===typeof dispatchEvent?e.dispatchEvent(b):e.documentElement[b]+=1);this.vars.pos=f;return!0},touch:function(a){d.vars.coords=[a.changedTouches[0].clientX,a.changedTouches[0].clientY];d.touch_evaluate();return!1},touch_evaluate:function(){var a=this.vars.coords,b="",f=this.vars.pos,e=this.sequence,
c=this.vars.touch,d=this.variance;0===f&&(c.up=c.up||a);Math.abs(a[0]-c.up[0])<d&&Math.abs(a[1]-c.up[1])<d&&(b=b||"UP");a[1]>c.up[1]&&(Math.abs(a[1]-c.up[1])>d&&Math.abs(a[0]-c.up[0])<d)&&(c.down=c.down||a,b=b||"DOWN");a[0]<c.up[0]&&Math.abs(a[0]-c.up[0])>d&&(c.left=c.left||a,b=b||"LEFT");a[0]>c.up[0]&&Math.abs(a[0]-c.up[0])>d&&(c.right=c.right||a,b=b||"RIGHT");-1===["UP","DOWN","LEFT","RIGHT"].indexOf(e[f])&&(b=e[f]);this.vars.touch=c;this.key_evaluate(b);return!0},init:function(){this.events();
return!0},listen:function(a){e.addEventListener?e.addEventListener(d.trigger,a):e.documentElement.attachEvent("onpropertychange",function(b){b.propertyName===d.trigger&&a.call()})},listener:function(a,b){e.addEventListener?e.addEventListener(a,b):e.attachEvent("on"+a,b)},events:function(){this.listener("keyup",this.key);this.listener("touchend",this.touch);return!0},debugging:function(a){if(!1===this.debug)return!1;"object"===typeof console?console.log(a):alert(a);return!0}};g.Konami=d})(window,document);
