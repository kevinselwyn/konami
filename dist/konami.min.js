/*! Konami - v1.0 - 2013-10-13
* http://kevinselwyn.com/
* Copyright (c) 2013 Kevin Selwyn; Licensed GPLv3 */
(function(e,t,n){"use strict";var r={trigger:"konami",sequence:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","B","A","START"],limit:!1,debug:!1,vars:{pos:0,touchstart:[0,0],touchend:[0,0],buttons:{13:"START",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",66:"B",65:"A"}},keyup:function(e){var t=r.vars.buttons[e.keyCode];return r.key_evaluate(t),!0},key_evaluate:function(e){var n=this.trigger,r=this.vars.pos,i=this.sequence;return this.debugging(e),r=i[r]===e?r+1:0,r===i.length&&this.limit!==0&&(r=0,this.limit!==!1&&(this.limit-=1),dispatchEvent?(n=new CustomEvent(n),t.dispatchEvent(n)):t.documentElement[n]+=1),this.vars.pos=r,!0},touchstart:function(e){return r.vars.touchstart=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],!0},touchend:function(e){return r.vars.touchend=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],r.touch_evaluate(),!0},touch_evaluate:function(){var e="",t=this.vars.pos,n=this.sequence,r=this.vars.touchstart,i=this.vars.touchend;return Math.abs(r[0]-i[0])<Math.abs(r[1]-i[1])?e=r[1]>i[1]?"UP":"DOWN":e=r[0]>i[0]?"LEFT":"RIGHT",["UP","DOWN","LEFT","RIGHT"].indexOf(n[t])===-1&&(e=n[t]),this.key_evaluate(e),!0},init:function(){return this.events(),!0},listen:function(e){var n=t;return n.addEventListener?n.addEventListener(r.trigger,e):n.documentElement.attachEvent("onpropertychange",function(t){t.propertyName===r.trigger&&e.call()}),!0},listener:function(e,n){return t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n),!0},events:function(){return this.listener("keyup",this.keyup),this.listener("touchstart",this.touchstart),this.listener("touchend",this.touchend),!0},debugging:function(e){return this.debug===!1?!1:(console?console.log(e):alert(e),!0)}};typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=r:(e.Konami=r,typeof define=="function"&&define.amd&&define("konami",[],function(){return r}))})(window,document);